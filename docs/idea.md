# Магазин тортов — Telegram-бот

## Цель
Бот-продавец тортов: показать ассортимент, подобрать вес/количество, оформить и оплатить заказ внутри Telegram.

## Пользовательские функции
- Просмотр карточек товаров (фото, название, описание, цена за вес/единицу).
- Выбор веса/размера (фиксированные опции или ввод кратно 0.5/1 кг — уточнить).
- Выбор количества.
- Добавление/удаление из корзины, просмотр корзины.
- Оформление заказа: контакты (телефон), адрес/доставка или самовывоз, комментарий.
- Оплата: ссылка/инвойс Telegram Payments; статус оплаты.
- История/статус заказа (минимально — подтверждение и итог).

## Администрирование (базово)
- Добавление/правка/архивация товаров, цен и доступных весов.
- Настройка способов оплаты (ключи/токены).

## Каталог
- Категории (например, классические, муссовые, капкейки).
- Поля карточки: id, название, описание, категория, цена (за кг/шт), доступные веса/объемы, фото (file_id), флаги доступности.

## Корзина и заказ
- Персистентная корзина на пользователя (user_id).
- Итоговая сумма = сумма позиций с учетом веса/количества.
- Валидация доступности товара и веса при оформлении.

## Оплата
- Telegram Payments (invoice), поддержка тестового провайдера.
- Фиксация статуса: создан → оплачен → передан в обработку.

## Нефункциональные
- Язык: русский (сообщения/кнопки).
- Минимальная защита от спама: троттлинг на команды/кнопки.
- Логи ошибок и важных событий.

## Технологии (план)
- Python, aiogram (v3) для бота.
- SQLAlchemy + aiosqlite (или SQLite с async) для хранения каталога, корзин и заказов.
- Хранение file_id Telegram для фото карточек.

## Минимальный пользовательский сценарий
1) Пользователь открывает меню → выбирает категорию → видит карточки.  
2) Открывает карточку, выбирает вес/количество → добавляет в корзину.  
3) В корзине корректирует позиции → оформляет заказ → оплачивает → получает подтверждение.

